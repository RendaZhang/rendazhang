---
import BaseLayout from '../layouts/BaseLayout.astro';
import Chat from '../components/Chat.jsx';
import {
  CHAT_PAGE_PATH,
  SITE_BASE_URL,
  STYLE_PATHS,
  AI_CHAT_TITLE,
  AI_CHAT_DESCRIPTION,
  VIEWPORT_ZOOM_ALLOWED
} from '../config.js';
---

<BaseLayout
  lang="zh-CN"
  title={AI_CHAT_TITLE}
  description={`${AI_CHAT_DESCRIPTION} Conversations are saved locally and support Markdown rendering.`}
  viewport={VIEWPORT_ZOOM_ALLOWED}
  canonical={`${SITE_BASE_URL}${CHAT_PAGE_PATH}/`}
  preloadStyles={[STYLE_PATHS.DEEPSEEK_CHAT, STYLE_PATHS.GITHUB_LIGHT]}
  extraStyles={[STYLE_PATHS.DEEPSEEK_CHAT, STYLE_PATHS.GITHUB_LIGHT]}
  og={{ url: `${SITE_BASE_URL}${CHAT_PAGE_PATH}/` }}
>
  <Fragment slot="head">
    <link rel="alternate" hreflang="zh" href={`${SITE_BASE_URL}${CHAT_PAGE_PATH}/`} />
    <link rel="alternate" hreflang="x-default" href={`${SITE_BASE_URL}${CHAT_PAGE_PATH}/`} />
  </Fragment>
  <Fragment slot="bodyEnd">
    <script>
      if (window.self !== window.top) {
        document.body.classList.add('embedded');
      }
    </script>
  </Fragment>

  <Chat client:load />
</BaseLayout>
