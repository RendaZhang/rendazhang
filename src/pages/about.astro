---
import BaseLayout from '../layouts/BaseLayout.astro';
import {
  SITE_BASE_URL,
  PAGE_TITLES,
  SITE_DESCRIPTION_EN,
  SITE_DESCRIPTION_ZH,
  ABOUT_PAGE_PATH,
  IMAGE_PATHS,
  RESUME_EN_DOWNLOAD,
  RESUME_ZH_DOWNLOAD
} from '../config.js';
import { ABOUT_CONTENT } from '../content/aboutContent.js';

const aboutPageData = {
  titles: { en: PAGE_TITLES.ABOUT_EN, zh: PAGE_TITLES.ABOUT_ZH },
  descriptions: { en: SITE_DESCRIPTION_EN, zh: SITE_DESCRIPTION_ZH },
  resumePaths: { en: IMAGE_PATHS.RESUME_EN, zh: IMAGE_PATHS.RESUME_ZH },
  resumeDownloads: { en: RESUME_EN_DOWNLOAD, zh: RESUME_ZH_DOWNLOAD }
};

const langDefault = 'zh';
const content = ABOUT_CONTENT[langDefault];
---

<BaseLayout
  lang="zh-CN"
  title={PAGE_TITLES.ABOUT_ZH}
  description={SITE_DESCRIPTION_ZH}
  canonical={`${SITE_BASE_URL}${ABOUT_PAGE_PATH}/`}
  extraStyles={['/css/about.css']}
  extraScripts={['/js/about.js']}
>
  <div id="content">
    <section class="hero">
      <h1 id="heroHeading" set:html={content.heroHeading} />
    </section>
    <section class="about-section">
      <h2 id="aboutTitle">{content.title}</h2>
      <div id="aboutParagraphs">
        {content.paragraphs.map((p) => <p>{p}</p>)}
      </div>
      <ul id="aboutInfo">
        {
          content.info.map(({ label, value }) => (
            <li>
              <span>{label}</span>
              {value}
            </li>
          ))
        }
      </ul>
      <div class="resume-link">
        <a
          id="resumeLink"
          href={IMAGE_PATHS.RESUME_ZH}
          download={RESUME_ZH_DOWNLOAD}
          class="btn btn-primary">{content.resumeLabel}</a
        >
      </div>
    </section>
  </div>

  <Fragment slot="head">
    <script is:inline>
      document.documentElement.style.visibility = 'hidden';
    </script>
    <script define:vars={{ aboutPageData, aboutPageContent: ABOUT_CONTENT }}>
      window.aboutPageData = aboutPageData;
      window.aboutPageContent = aboutPageContent;
    </script>
  </Fragment>
</BaseLayout>
