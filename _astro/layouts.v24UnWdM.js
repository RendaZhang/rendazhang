import{j as e,I as b,u as j,b as T,d as _,r as A,s as R,e as O,T as M,f as P,g as B}from"./index.CEq_y5-P.js";import{r as c}from"./index.-_oy9bZA.js";import"./certifications.9f0375e8.B4Uv7KUm.js";import{L as g,H as w,C as H,a as z,D as G,P as F,I as U,b as E}from"./LocalizedSection.BHVDJlx-.js";import{M as W}from"./Modal.LoMuAfPB.js";import{i as k,j as $,k as L,n as V,o as Y,w as N,h as Z}from"./logger.BoW92lqO.js";import{D as C,W as m,g as K}from"./debug-build.CbdEl_Xo.js";(function(){var n=typeof window<"u"?window:typeof global<"u"?global:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{};n.SENTRY_RELEASE={id:"7f587daaa12957af3a9439f51c5d6fbb4d7b3f42"}})();try{(function(){var n=typeof window<"u"?window:typeof global<"u"?global:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{},t=new n.Error().stack;t&&(n._sentryDebugIds=n._sentryDebugIds||{},n._sentryDebugIds[t]="8bf69363-3098-4850-8403-936b0296e819",n._sentryDebugIdIdentifier="sentry-dbid-8bf69363-3098-4850-8403-936b0296e819")})()}catch{}const p={en:{home:"Home",loggedIn:"Logged In",login:"Login",logout:"Logout",logoutConfirm:"Are you sure you want to log out?",cancel:"Cancel",register:"Register",menu:"Menu",profile:"Account Profile",drawer:{home:"Home",chat:"AI Chat",certs:"Certifications",docs:"Tech Docs",profile:"Account Profile"},theme:{button:"Theme",light:"Switch to Light Mode",dark:"Switch to Dark Mode"}},zh:{home:"首页",loggedIn:"已登录",login:"登录",logout:"退出",logoutConfirm:"确定要退出登录吗？",cancel:"取消",register:"注册",menu:"菜单",profile:"账号信息",drawer:{home:"首页",chat:"AI 聊天",certs:"证书",docs:"技术文档",profile:"账号信息"},theme:{button:"切换主题",light:"切换到浅色模式",dark:"切换到深色模式"}}};function I(n={}){const t=m.document,s=t?.head||t?.body;if(!s){C&&k.error("[showReportDialog] Global document not defined");return}const o=$(),r=L()?.getDsn();if(!r){C&&k.error("[showReportDialog] DSN not configured");return}const u={...n,user:{...o.getUser(),...n.user},eventId:n.eventId||V()},i=m.document.createElement("script");i.async=!0,i.crossOrigin="anonymous",i.src=K(r,u);const{onLoad:f,onClose:l}=u;if(f&&(i.onload=f),l){const h=d=>{if(d.data==="__sentry_reportdialog_closed__")try{l()}finally{m.removeEventListener("message",h)}};m.addEventListener("message",h)}s.appendChild(i)}function q(n){const t=n.match(/^([^.]+)/);return t!==null&&parseInt(t[0])>=17}function J(n,t){const s=new WeakSet;function o(a,r){if(!s.has(a)){if(a.cause)return s.add(a),o(a.cause,r);a.cause=r}}o(n,t)}function Q(n,{componentStack:t},s){if(q(c.version)&&Y(n)&&t){const o=new Error(n.message);o.name=`React ErrorBoundary ${n.name}`,o.stack=t,J(n,o)}return N(o=>(o.setContext("react",{componentStack:t}),Z(n,s)))}const X=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__,v={componentStack:null,error:null,eventId:null};let ee=class extends c.Component{constructor(t){super(t),this.state=v,this._openFallbackReportDialog=!0;const s=L();s&&t.showDialog&&(this._openFallbackReportDialog=!1,this._cleanupHook=s.on("afterSendEvent",o=>{!o.type&&this._lastEventId&&o.event_id===this._lastEventId&&I({...t.dialogOptions,eventId:this._lastEventId})}))}componentDidCatch(t,s){const{componentStack:o}=s,{beforeCapture:a,onError:r,showDialog:u,dialogOptions:i}=this.props;N(f=>{a&&a(f,t,o);const l=this.props.handled!=null?this.props.handled:!!this.props.fallback,h=Q(t,s,{mechanism:{handled:l}});r&&r(t,o,h),u&&(this._lastEventId=h,this._openFallbackReportDialog&&I({...i,eventId:h})),this.setState({error:t,componentStack:o,eventId:h})})}componentDidMount(){const{onMount:t}=this.props;t&&t()}componentWillUnmount(){const{error:t,componentStack:s,eventId:o}=this.state,{onUnmount:a}=this.props;a&&(this.state===v?a(null,null,null):a(t,s,o)),this._cleanupHook&&(this._cleanupHook(),this._cleanupHook=void 0)}resetErrorBoundary(){const{onReset:t}=this.props,{error:s,componentStack:o,eventId:a}=this.state;t&&t(s,o,a),this.setState(v)}render(){const{fallback:t,children:s}=this.props,o=this.state;if(o.componentStack===null)return typeof s=="function"?s():s;const a=typeof t=="function"?c.createElement(t,{error:o.error,componentStack:o.componentStack,resetError:()=>this.resetErrorBoundary(),eventId:o.eventId}):t;return c.isValidElement(a)?a:(t&&X&&k.warn("fallback did not produce a valid ReactElement"),null)}};function ne({size:n=b.DEFAULT}){return e.jsxs("svg",{width:n,height:n,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"}),e.jsx("circle",{cx:"12",cy:"7",r:"4"})]})}function te({size:n=b.DEFAULT}){return e.jsxs("svg",{width:n,height:n,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"}),e.jsx("circle",{cx:"12",cy:"7",r:"4"}),e.jsx("polyline",{points:"16 11 18 13 22 9"})]})}function oe({size:n=b.DEFAULT}){return e.jsxs("svg",{width:n,height:n,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"}),e.jsx("polyline",{points:"16 17 21 12 16 7"}),e.jsx("line",{x1:"21",y1:"12",x2:"9",y2:"12"})]})}function D({size:n=20}){return e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:n,height:n,"aria-hidden":"true",focusable:"false",children:[e.jsx("path",{d:"M12 18a6 6 0 110-12 6 6 0 010 12z",fill:"currentColor"}),e.jsxs("g",{stroke:"currentColor",strokeWidth:"2",children:[e.jsx("line",{x1:"12",y1:"2",x2:"12",y2:"4"}),e.jsx("line",{x1:"12",y1:"20",x2:"12",y2:"22"}),e.jsx("line",{x1:"4",y1:"12",x2:"2",y2:"12"}),e.jsx("line",{x1:"22",y1:"12",x2:"20",y2:"12"}),e.jsx("line",{x1:"5.64",y1:"5.64",x2:"4.22",y2:"4.22"}),e.jsx("line",{x1:"18.36",y1:"18.36",x2:"19.78",y2:"19.78"}),e.jsx("line",{x1:"5.64",y1:"18.36",x2:"4.22",y2:"19.78"}),e.jsx("line",{x1:"18.36",y1:"5.64",x2:"19.78",y2:"4.22"})]})]})}function S({size:n=20}){return e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:n,height:n,"aria-hidden":"true",focusable:"false",children:e.jsx("path",{d:"M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z",fill:"currentColor"})})}function se({size:n=20}){return e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"is-theme-light","aria-hidden":"true",children:e.jsx(D,{size:n})}),e.jsx("span",{className:"is-theme-dark","aria-hidden":"true",children:e.jsx(S,{size:n})})]})}function ae({size:n=20}){return e.jsxs("svg",{width:n,height:n,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",focusable:"false",children:[e.jsx("circle",{cx:"12",cy:"12",r:"10"}),e.jsx("line",{x1:"2",y1:"12",x2:"22",y2:"12"}),e.jsx("path",{d:"M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z"})]})}function re(){const{lang:n,updateLang:t}=j(),[s,o]=c.useState(!1),a=c.useRef(null),r=c.useRef(null);c.useEffect(()=>{function i(f){const l=f.target;a.current&&!a.current.contains(l)&&r.current&&!r.current.contains(l)&&o(!1)}return document.addEventListener("click",i),()=>document.removeEventListener("click",i)},[]);const u=i=>{t(i),o(!1)};return e.jsxs("div",{className:"c-language-selector-wrapper",children:[e.jsxs("button",{ref:a,className:"c-language-selector-main","aria-haspopup":"listbox","aria-expanded":s,"aria-label":n==="en"?"Change language":"切换语言",onClick:()=>o(i=>!i),children:[e.jsx(g,{zhContent:"中文",enContent:"English"}),e.jsx(ae,{})]}),s&&e.jsxs("div",{ref:r,className:"c-language-options",role:"listbox",children:[e.jsx("button",{className:`c-language-option ${n==="zh-CN"?"is-active":""}`,role:"option","aria-selected":n==="zh-CN",onClick:()=>u("zh-CN"),children:"中文"}),e.jsx("button",{className:`c-language-option ${n==="en"?"is-active":""}`,role:"option","aria-selected":n==="en",onClick:()=>u("en"),children:"English"})]})]})}function ie(){const{darkMode:n,setTheme:t}=T(),{lang:s}=j(),[o,a]=c.useState(!1),r=c.useRef(null),u=c.useRef(null),i=p.zh.theme,f=p.en.theme,l=p[s]?.theme||{};c.useEffect(()=>{function d(x){const y=x.target;r.current&&!r.current.contains(y)&&(!u.current||!u.current.contains(y))&&a(!1)}return document.addEventListener("click",d),()=>document.removeEventListener("click",d)},[]);const h=d=>{t(d),a(!1)};return e.jsxs("div",{className:"c-theme-toggle-wrapper",children:[e.jsxs("button",{ref:r,className:"c-theme-toggle-main","aria-expanded":o,"aria-label":s==="en"?f.button:i.button,onClick:()=>a(d=>!d),children:[e.jsx(g,{zhContent:i.button,enContent:f.button}),e.jsx(se,{})]}),o&&e.jsxs("div",{ref:u,className:"c-theme-options",children:[e.jsx("button",{className:`c-theme-option is-light ${n?"":"is-active"}`,"aria-label":l.light||"切换到浅色模式",title:l.light||"切换到浅色模式",onClick:()=>h(!1),children:e.jsx(D,{size:20})}),e.jsx("button",{className:`c-theme-option is-dark ${n?"is-active":""}`,"aria-label":l.dark||"切换到深色模式",title:l.dark||"切换到深色模式",onClick:()=>h(!0),children:e.jsx(S,{size:20})})]})]})}function ce({isOpen:n,message:t,confirmLabel:s,cancelLabel:o,onConfirm:a,onCancel:r}){return e.jsxs(W,{isOpen:n,onClose:r,children:[e.jsx("div",{children:t}),e.jsxs("div",{className:"c-modal-actions",children:[e.jsx("button",{type:"button",className:"c-btn-secondary",onClick:r,children:o}),e.jsx("button",{type:"button",className:"c-btn-primary",onClick:a,children:s})]})]})}function le(){const[n,t]=c.useState(!1),[s,o]=c.useState(!1),a=c.useRef(null),{lang:r}=j(),{isLoggedIn:u}=_(),i=p.en.drawer,f=p.zh.drawer;c.useEffect(()=>{o(!0)},[]),c.useEffect(()=>{if(!s)return;function d(x){n&&a.current&&!a.current.contains(x.target)&&!x.target.closest(".c-hamburger-btn")&&t(!1)}return document.addEventListener("click",d),()=>document.removeEventListener("click",d)},[n,s]);const l=[{href:w,key:"home"},{href:H,key:"chat"},{href:z,key:"certs"},{href:G,key:"docs"}],h=u?[...l,{href:F,key:"profile"}]:l;return e.jsxs(e.Fragment,{children:[e.jsxs("button",{className:`c-hamburger-btn${n?" is-open":""}`,"aria-label":p[r]?.menu||"Menu","aria-expanded":n,onClick:()=>t(d=>!d),children:[e.jsx("span",{}),e.jsx("span",{}),e.jsx("span",{})]}),s&&A.createPortal(e.jsxs(e.Fragment,{children:[e.jsx("div",{className:`c-side-menu-overlay${n?" is-open":""}`,onClick:()=>t(!1)}),e.jsx("div",{ref:a,className:`c-side-menu${n?" is-open":""}`,children:h.map(d=>e.jsx("a",{href:d.href,className:"c-side-menu-link",onClick:()=>t(!1),children:e.jsx(g,{zhContent:f[d.key],enContent:i[d.key]})},d.key))})]}),document.body)]})}function de(){const{lang:n}=j(),{logout:t}=_(),s=p.en,o=p.zh,[a,r]=c.useState(!1),[u,i]=c.useState(!1),f=()=>{r(!0)},l=()=>{r(!1)},h=async()=>{l(),i(!0),await t(),R.remove(O),window.location.href=E};return e.jsx("div",{className:"c-nav-container",children:e.jsxs("nav",{children:[e.jsxs("div",{className:"c-nav-left",children:[e.jsx(le,{}),e.jsxs("a",{href:w,"aria-label":n==="en"?s.home:o.home,className:"c-nav-logo",children:[e.jsxs("span",{className:"c-nav-home-logged-out",children:[e.jsx("img",{src:U.LOGO_V4,alt:"",className:"c-nav-logo-icon"}),e.jsx(g,{zhContent:o.home,enContent:s.home})]}),e.jsxs("span",{className:"c-nav-home-logged-in",children:[e.jsx(te,{}),e.jsx(g,{zhContent:o.loggedIn,enContent:s.loggedIn})]})]})]}),e.jsxs("div",{className:"c-nav-right",children:[e.jsx(re,{}),e.jsx(ie,{}),e.jsx("a",{href:E,"aria-label":n==="en"?s.login:o.login,className:"c-avatar-link c-login-link",children:e.jsx(ne,{})}),e.jsx("button",{type:"button",onClick:f,"aria-label":n==="en"?s.logout:o.logout,className:"c-avatar-link c-logout-link",disabled:u,children:u?e.jsx("span",{className:"c-spinner",style:{"--spinner-size":"var(--space-5)","--spinner-color":"var(--color-nav-text)"},"aria-hidden":"true"}):e.jsx(oe,{})}),e.jsx(ce,{isOpen:a,message:e.jsx(g,{zhContent:o.logoutConfirm,enContent:s.logoutConfirm}),confirmLabel:e.jsx(g,{zhContent:o.logout,enContent:s.logout}),cancelLabel:e.jsx(g,{zhContent:o.cancel,enContent:s.cancel}),onConfirm:h,onCancel:l})]})]})})}function ue({children:n}){return e.jsx(ee,{fallback:e.jsx(g,{zhContent:e.jsx("p",{children:"页面崩溃了"}),enContent:e.jsx("p",{children:"The page has crashed"})}),children:n})}function ke({initialLang:n,showNav:t=!0,children:s}){return e.jsx(M,{children:e.jsx(P,{initialLang:n,children:e.jsx(B,{children:e.jsxs(ue,{children:[t&&e.jsx(de,{}),s]})})})})}export{ke as NavBarWrapper};
//# sourceMappingURL=layouts.v24UnWdM.js.map
